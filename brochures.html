<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toyota Brochure Library | Jeff Lee</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-red: #e63946;
            --dark-red: #b82d39;
            --toyota-red: #eb0a1e;
            --bg-dark: #0a0a0a;
            --bg-card: #141414;
            --bg-card-hover: #1a1a1a;
            --border-color: #2a2a2a;
            --text-primary: #ffffff;
            --text-secondary: #888888;
            --text-muted: #555555;
            --success: #22c55e;
            --warning: #f59e0b;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%);
            border-bottom: 1px solid var(--border-color);
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .back-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 14px;
            transition: color 0.2s;
        }

        .back-btn:hover {
            color: var(--primary-red);
        }

        .page-title {
            font-size: 24px;
            font-weight: 700;
        }

        .page-title span {
            color: var(--primary-red);
        }

        .model-year-badge {
            background: var(--primary-red);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .search-box {
            position: relative;
        }

        .search-box input {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 10px 16px 10px 40px;
            color: var(--text-primary);
            font-size: 14px;
            width: 300px;
            transition: all 0.2s;
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--primary-red);
        }

        .search-box i {
            position: absolute;
            left: 14px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
        }

        /* Main Content */
        .main-content {
            padding: 30px 40px;
            max-width: 1600px;
            margin: 0 auto;
        }

        /* Category Tabs */
        .category-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .category-tab {
            padding: 10px 20px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
            font-weight: 500;
        }

        .category-tab:hover {
            border-color: var(--primary-red);
            color: var(--text-primary);
        }

        .category-tab.active {
            background: var(--primary-red);
            border-color: var(--primary-red);
            color: white;
        }

        /* Vehicle Grid */
        .vehicle-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }

        .vehicle-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
        }

        .vehicle-card:hover {
            transform: translateY(-4px);
            border-color: var(--primary-red);
            box-shadow: 0 10px 40px rgba(230, 57, 70, 0.15);
        }

        .vehicle-image {
            height: 180px;
            background: linear-gradient(135deg, #1a1a1a 0%, #252525 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .vehicle-image img {
            max-width: 95%;
            max-height: 95%;
            object-fit: contain;
            transition: transform 0.3s;
        }

        .vehicle-card:hover .vehicle-image img {
            transform: scale(1.05);
        }

        .vehicle-image .placeholder-icon {
            font-size: 48px;
            color: var(--text-muted);
        }

        .vehicle-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--primary-red);
            color: white;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .vehicle-badge.hybrid {
            background: var(--success);
        }

        .vehicle-info {
            padding: 16px;
        }

        .vehicle-name {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .vehicle-tagline {
            color: var(--text-secondary);
            font-size: 13px;
            margin-bottom: 12px;
        }

        /* Color Swatches on Card */
        .card-color-swatches {
            display: flex;
            gap: 6px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .card-color-swatch {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid var(--border-color);
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .card-color-swatch:hover {
            transform: scale(1.2);
            border-color: var(--primary-red);
        }

        .card-color-swatch.active {
            border-color: var(--primary-red);
            box-shadow: 0 0 0 2px rgba(230, 57, 70, 0.3);
        }

        .card-color-swatch.more {
            background: var(--bg-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 9px;
            color: var(--text-secondary);
        }

        .vehicle-quick-specs {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
        }

        .quick-spec {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .quick-spec-label {
            font-size: 10px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .quick-spec-value {
            font-size: 14px;
            font-weight: 600;
            color: var(--primary-red);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            display: none;
            justify-content: center;
            align-items: flex-start;
            padding: 40px;
            z-index: 1000;
            overflow-y: auto;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            width: 100%;
            max-width: 1000px;
            position: relative;
            animation: modalSlide 0.3s ease;
        }

        @keyframes modalSlide {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-close {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--bg-dark);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            z-index: 10;
        }

        .modal-close:hover {
            background: var(--primary-red);
            border-color: var(--primary-red);
            color: white;
        }

        .modal-header {
            padding: 30px;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-vehicle-showcase {
            display: flex;
            gap: 30px;
            align-items: flex-start;
        }

        .modal-image-section {
            flex: 1;
            max-width: 450px;
        }

        .modal-main-image {
            background: linear-gradient(135deg, #1a1a1a 0%, #252525 100%);
            border-radius: 12px;
            height: 260px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            margin-bottom: 16px;
        }

        .modal-main-image img {
            max-width: 95%;
            max-height: 95%;
            object-fit: contain;
            transition: opacity 0.3s;
        }

        .modal-main-image .placeholder-icon {
            font-size: 64px;
            color: var(--text-muted);
        }

        .modal-main-image .image-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--text-muted);
        }

        /* Color Gallery */
        .color-gallery {
            background: var(--bg-dark);
            border-radius: 10px;
            padding: 16px;
        }

        .color-gallery-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .color-gallery-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .color-gallery-count {
            font-size: 11px;
            color: var(--text-secondary);
        }

        .color-swatches {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .color-swatch {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .color-swatch:hover {
            transform: scale(1.15);
        }

        .color-swatch.active {
            border-color: var(--primary-red);
            box-shadow: 0 0 0 3px rgba(230, 57, 70, 0.3);
        }

        .color-swatch::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 50%;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .color-name-display {
            margin-top: 12px;
            padding: 10px 14px;
            background: var(--bg-card);
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .color-name-swatch {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid rgba(255,255,255,0.1);
        }

        .color-name-text {
            font-size: 14px;
            font-weight: 500;
        }

        .modal-info-section {
            flex: 1;
        }

        .modal-year {
            font-size: 14px;
            color: var(--primary-red);
            font-weight: 600;
            margin-bottom: 4px;
        }

        .modal-title {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 8px;
        }

        .modal-tagline {
            color: var(--text-secondary);
            font-size: 15px;
            margin-bottom: 16px;
        }

        .modal-price-range {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: var(--bg-dark);
            padding: 10px 18px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .modal-price-label {
            color: var(--text-muted);
            font-size: 12px;
        }

        .modal-price {
            font-size: 22px;
            font-weight: 700;
            color: var(--success);
        }

        .modal-badges {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .modal-badge {
            padding: 6px 12px;
            background: var(--bg-dark);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .modal-badge.hybrid {
            background: rgba(34, 197, 94, 0.1);
            border-color: var(--success);
            color: var(--success);
        }

        .modal-badge.featured {
            background: rgba(230, 57, 70, 0.1);
            border-color: var(--primary-red);
            color: var(--primary-red);
        }

        .modal-body {
            padding: 30px;
        }

        /* Specs Grid */
        .specs-section {
            margin-bottom: 30px;
        }

        .specs-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border-color);
        }

        .specs-title i {
            margin-right: 8px;
            color: var(--primary-red);
        }

        .specs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 16px;
        }

        .spec-item {
            background: var(--bg-dark);
            padding: 14px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .spec-label {
            font-size: 11px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .spec-value {
            font-size: 16px;
            font-weight: 600;
        }

        .spec-value.highlight {
            color: var(--primary-red);
        }

        /* Trim Levels */
        .trims-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }

        .trim-item {
            background: var(--bg-dark);
            padding: 14px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .trim-name {
            font-weight: 600;
        }

        .trim-price {
            color: var(--success);
            font-weight: 600;
        }

        /* Action Buttons */
        .modal-actions {
            padding: 20px 30px;
            border-top: 1px solid var(--border-color);
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .action-btn.primary {
            background: var(--primary-red);
            border: none;
            color: white;
        }

        .action-btn.primary:hover {
            background: var(--dark-red);
        }

        .action-btn.secondary {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }

        .action-btn.secondary:hover {
            border-color: var(--primary-red);
            color: var(--primary-red);
        }

        .action-btn.success {
            background: var(--success);
            border: none;
            color: white;
        }

        .action-btn.success:hover {
            background: #1aa34a;
        }

        /* Email Modal */
        .email-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .email-modal-overlay.active {
            display: flex;
        }

        .email-modal {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            width: 100%;
            max-width: 500px;
            padding: 30px;
        }

        .email-modal h3 {
            margin-bottom: 20px;
            font-size: 20px;
        }

        .email-modal input {
            width: 100%;
            padding: 12px 16px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            background: var(--bg-dark);
            color: var(--text-primary);
            font-size: 14px;
            margin-bottom: 12px;
        }

        .email-modal input:focus {
            outline: none;
            border-color: var(--primary-red);
        }

        .email-modal textarea {
            width: 100%;
            padding: 12px 16px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            background: var(--bg-dark);
            color: var(--text-primary);
            font-size: 14px;
            margin-bottom: 20px;
            min-height: 150px;
            resize: vertical;
            font-family: inherit;
        }

        .email-modal textarea:focus {
            outline: none;
            border-color: var(--primary-red);
        }

        .email-modal-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--success);
            color: white;
            padding: 16px 24px;
            border-radius: 8px;
            font-weight: 600;
            display: none;
            align-items: center;
            gap: 10px;
            z-index: 3000;
            animation: slideIn 0.3s ease;
        }

        .toast.active {
            display: flex;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Print Styles */
        @media print {
            * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
            
            body {
                background: white !important;
                color: black !important;
            }
            
            .header, .modal-close, .modal-actions, .category-tabs, .vehicle-grid, .email-modal-overlay, .toast, .color-gallery {
                display: none !important;
            }
            
            .modal-overlay {
                position: static !important;
                background: none !important;
                padding: 0 !important;
                display: block !important;
            }
            
            .modal-content {
                border: none !important;
                box-shadow: none !important;
                background: white !important;
                max-width: none !important;
            }

            .modal-header {
                border-bottom: 2px solid #ccc !important;
                background: white !important;
            }

            .modal-main-image {
                background: #f5f5f5 !important;
            }

            .modal-year, .modal-title, .modal-tagline {
                color: black !important;
            }

            .modal-price-range {
                background: #f5f5f5 !important;
            }

            .modal-price-label {
                color: #666 !important;
            }

            .modal-price {
                color: #22c55e !important;
            }

            .modal-body {
                background: white !important;
            }

            .specs-title {
                color: #333 !important;
                border-color: #ccc !important;
            }
            
            .spec-item, .trim-item {
                border: 1px solid #ddd !important;
                background: #f9f9f9 !important;
            }

            .spec-label {
                color: #666 !important;
            }

            .spec-value {
                color: black !important;
            }

            .spec-value.highlight {
                color: #e63946 !important;
            }

            .trim-name {
                color: black !important;
            }

            .trim-price {
                color: #22c55e !important;
            }

            /* Print Header */
            .print-header {
                display: block !important;
                text-align: center;
                padding: 20px;
                border-bottom: 2px solid #e63946;
                margin-bottom: 20px;
            }

            .print-header h1 {
                font-size: 24px;
                color: black;
            }

            .print-header p {
                color: #666;
                margin-top: 5px;
            }

            /* Print Footer */
            .print-footer {
                display: block !important;
                text-align: center;
                padding: 20px;
                border-top: 1px solid #ccc;
                margin-top: 30px;
                font-size: 12px;
                color: #666;
            }
        }

        .print-header, .print-footer {
            display: none;
        }

        /* Responsive */
        @media (max-width: 900px) {
            .modal-vehicle-showcase {
                flex-direction: column;
            }

            .modal-image-section {
                max-width: 100%;
            }
        }

        @media (max-width: 768px) {
            .header {
                padding: 16px 20px;
                flex-direction: column;
                gap: 16px;
            }

            .search-box input {
                width: 100%;
            }

            .main-content {
                padding: 20px;
            }

            .modal-header {
                padding: 20px;
            }

            .modal-actions {
                flex-direction: column;
            }

            .action-btn {
                justify-content: center;
            }

            .vehicle-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-left">
            <a href="index.html" class="back-btn">
                <i class="fas fa-arrow-left"></i>
                Command Center
            </a>
            <h1 class="page-title">Toyota <span>Brochure Library</span></h1>
            <span class="model-year-badge">2025-2026 Models</span>
        </div>
        <div class="header-right">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="vehicleSearch" placeholder="Search vehicles...">
            </div>
        </div>
    </header>

    <main class="main-content">
        <div class="category-tabs">
            <button class="category-tab active" data-category="all">All Models</button>
            <button class="category-tab" data-category="sedan">Sedans</button>
            <button class="category-tab" data-category="hatchback">Hatchbacks</button>
            <button class="category-tab" data-category="suv">SUVs</button>
            <button class="category-tab" data-category="truck">Trucks</button>
            <button class="category-tab" data-category="van">Vans</button>
            <button class="category-tab" data-category="sports">Sports</button>
            <button class="category-tab" data-category="hybrid">Hybrid/EV</button>
        </div>

        <div class="vehicle-grid" id="vehicleGrid">
            <!-- Cards populated by JS -->
        </div>
    </main>

    <!-- Vehicle Detail Modal -->
    <div class="modal-overlay" id="vehicleModal">
        <div class="modal-content">
            <!-- Print Header (only shows when printing) -->
            <div class="print-header">
                <h1>JEFF LEE | Sales Consultant</h1>
                <p>Pedersen Toyota | 720-416-6955 | jlee@pedersentoyota.com</p>
            </div>

            <button class="modal-close" onclick="closeModal()">
                <i class="fas fa-times"></i>
            </button>

            <div class="modal-header">
                <div class="modal-vehicle-showcase">
                    <div class="modal-image-section">
                        <div class="modal-main-image" id="modalMainImage">
                            <i class="fas fa-car placeholder-icon"></i>
                        </div>
                        <div class="color-gallery" id="colorGallery">
                            <div class="color-gallery-header">
                                <span class="color-gallery-title"><i class="fas fa-palette"></i> Exterior Colors</span>
                                <span class="color-gallery-count" id="colorCount">0 colors</span>
                            </div>
                            <div class="color-swatches" id="colorSwatches">
                                <!-- Color swatches populated by JS -->
                            </div>
                            <div class="color-name-display" id="colorNameDisplay">
                                <div class="color-name-swatch" id="colorNameSwatch"></div>
                                <span class="color-name-text" id="colorNameText">Select a color</span>
                            </div>
                        </div>
                    </div>
                    <div class="modal-info-section">
                        <div class="modal-year" id="modalYear">2026</div>
                        <h2 class="modal-title" id="modalTitle">Vehicle Name</h2>
                        <p class="modal-tagline" id="modalTagline">Tagline here</p>
                        <div class="modal-price-range">
                            <span class="modal-price-label">Starting MSRP</span>
                            <span class="modal-price" id="modalPrice">$00,000</span>
                        </div>
                        <div class="modal-badges" id="modalBadges"></div>
                    </div>
                </div>
            </div>

            <div class="modal-body" id="modalBody">
                <!-- Specs populated by JS -->
            </div>

            <div class="modal-actions">
                <button class="action-btn primary" onclick="printBrochure()">
                    <i class="fas fa-file-pdf"></i>
                    Print / Save PDF
                </button>
                <button class="action-btn success" onclick="openEmailModal()">
                    <i class="fas fa-envelope"></i>
                    Email to Customer
                </button>
                <a class="action-btn secondary" id="toyotaLink" href="#" target="_blank">
                    <i class="fas fa-external-link-alt"></i>
                    View on Toyota.com
                </a>
                <a class="action-btn secondary" id="configuratorLink" href="#" target="_blank">
                    <i class="fas fa-sliders-h"></i>
                    Build & Price
                </a>
                <button class="action-btn secondary" onclick="copySpecs()">
                    <i class="fas fa-copy"></i>
                    Copy Specs
                </button>
            </div>

            <!-- Print Footer (only shows when printing) -->
            <div class="print-footer">
                <p>Pedersen Toyota | 4455 S College Ave, Fort Collins, CO 80525</p>
                <p>Contact Jeff Lee: 720-416-6955 | jlee@pedersentoyota.com</p>
                <p>Prices shown are MSRP. Final pricing may vary. See dealer for details.</p>
            </div>
        </div>
    </div>

    <!-- Email Modal -->
    <div class="email-modal-overlay" id="emailModal">
        <div class="email-modal">
            <h3><i class="fas fa-envelope" style="color: var(--primary-red); margin-right: 10px;"></i>Email Spec Sheet</h3>
            <input type="text" id="customerName" placeholder="Customer Name">
            <input type="email" id="customerEmail" placeholder="Customer Email">
            <textarea id="emailMessage"></textarea>
            <div class="email-modal-actions">
                <button class="action-btn secondary" onclick="closeEmailModal()">Cancel</button>
                <button class="action-btn success" onclick="sendEmail()">
                    <i class="fas fa-paper-plane"></i>
                    Send Email
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toastMessage">Success!</span>
    </div>

    <script>
        // ===========================================
        // TOYOTA EXTERIOR COLORS DATABASE
        // ===========================================
        // Color codes and hex values for UI swatches
        // Images loaded from Toyota's CDN
        
        const colorDatabase = {
            // Standard Toyota Colors (available across multiple models)
            'supersonic-red': { name: 'Supersonic Red', hex: '#C41E3A', code: '3U5' },
            'wind-chill-pearl': { name: 'Wind Chill Pearl', hex: '#F5F5F5', code: '089' },
            'midnight-black-metallic': { name: 'Midnight Black Metallic', hex: '#1C1C1C', code: '218' },
            'magnetic-gray-metallic': { name: 'Magnetic Gray Metallic', hex: '#5A5A5A', code: '1G3' },
            'celestial-silver-metallic': { name: 'Celestial Silver Metallic', hex: '#A8A8A8', code: '1J9' },
            'blueprint': { name: 'Blueprint', hex: '#1B365D', code: '8X8' },
            'ice-cap': { name: 'Ice Cap', hex: '#E8E8E8', code: '083' },
            'underground': { name: 'Underground', hex: '#4A4A4A', code: '6X3' },
            'cavalry-blue': { name: 'Cavalry Blue', hex: '#284B63', code: '8W2' },
            'ruby-flare-pearl': { name: 'Ruby Flare Pearl', hex: '#7B2D3B', code: '3T3' },
            'white': { name: 'Super White', hex: '#FFFFFF', code: '040' },
            'bronze-oxide': { name: 'Bronze Oxide', hex: '#6B4423', code: '4X6' },
            'reservoir-blue': { name: 'Reservoir Blue', hex: '#3A5F77', code: '8Y6' },
            'solar-shift': { name: 'Solar Shift', hex: '#B87333', code: '4Y9' },
            'heavy-metal': { name: 'Heavy Metal', hex: '#3E4347', code: '1H5' },
            
            // RAV4 / SUV specific
            'lunar-rock': { name: 'Lunar Rock', hex: '#B5B5A5', code: '6X3' },
            'army-green': { name: 'Army Green', hex: '#4B5320', code: '6V7' },
            'urban-khaki': { name: 'Urban Khaki', hex: '#8B7355', code: '4V8' },
            
            // Tacoma / Truck specific
            'trail-hunter': { name: 'Trail Hunter', hex: '#6B8E23', code: '6W2' },
            'lime-rush': { name: 'Lime Rush', hex: '#32CD32', code: '588' },
            'terra': { name: 'Terra', hex: '#B5651D', code: '4V6' },
            'oxide-bronze': { name: 'Oxide Bronze', hex: '#7B5544', code: '4X7' },
            
            // Camry / Sedan specific
            'predawn-gray-mica': { name: 'Predawn Gray Mica', hex: '#4F4F4F', code: '1H1' },
            'reservoir-blue-2': { name: 'Reservoir Blue', hex: '#3B6E8F', code: '8Y6' },
            'underground-2': { name: 'Underground', hex: '#3E3E3E', code: '1K4' },
            
            // Crown specific
            'oxygen-white': { name: 'Oxygen White', hex: '#F0F0F0', code: '093' },
            'precious-bronze': { name: 'Precious Bronze', hex: '#8B7355', code: '4X8' },
            'cutting-edge': { name: 'Cutting Edge', hex: '#2F4F4F', code: '1L9' },
            
            // GR specific
            'track-brat-red': { name: 'Track bRed', hex: '#FF2400', code: '3U1' },
            'halo': { name: 'Halo', hex: '#E0E0E0', code: '084' },
            'stratosphere-blue': { name: 'Stratosphere Blue', hex: '#4169E1', code: '8Y7' },
            'renaissance-red': { name: 'Renaissance Red 2.0', hex: '#A91B0D', code: 'A96' },
            'nitro-yellow': { name: 'Nitro Yellow', hex: '#FFD700', code: '5A3' },
            'phantom': { name: 'Phantom', hex: '#363636', code: '1K2' },
            'absolute-zero': { name: 'Absolute Zero', hex: '#E8E8E8', code: '094' },
            'turbulence-gray': { name: 'Turbulence Gray', hex: '#6C6C6C', code: 'PCK' },
            
            // Prius specific
            'electric-storm-blue': { name: 'Electric Storm Blue', hex: '#4682B4', code: '8X9' },
            'wind-chill-pearl-prius': { name: 'Wind Chill Pearl', hex: '#F8F8F8', code: '089' },
            
            // 4Runner / Off-road specific
            'mud-pie': { name: 'Mud Pie', hex: '#6B4226', code: '4X4' },
            'everest': { name: 'Everest', hex: '#E5E5DC', code: '082' },
            
            // EV specific
            'elemental-silver': { name: 'Elemental Silver', hex: '#C0C0C0', code: '1J2' },
            'black': { name: 'Black', hex: '#000000', code: '202' },
            'celestite-gray': { name: 'Celestite Gray', hex: '#9B9B9B', code: '1K5' },
            
            // Sienna specific
            'predawn-gray-mica-sienna': { name: 'Predawn Gray Mica', hex: '#505050', code: '1H1' },
            'celestial-silver': { name: 'Celestial Silver', hex: '#B0B0B0', code: '1J9' },
            'opulent-amber': { name: 'Opulent Amber', hex: '#CC7722', code: '4X5' },
            
            // Highlander specific
            'cypress': { name: 'Cypress', hex: '#355E3B', code: '6V4' },
            'moon-dust': { name: 'Moon Dust', hex: '#C4BCAD', code: '4X1' },
        };

        // Vehicle-specific color availability
        const vehicleColors = {
            'corolla': ['supersonic-red', 'wind-chill-pearl', 'midnight-black-metallic', 'magnetic-gray-metallic', 'celestial-silver-metallic', 'blueprint', 'ice-cap'],
            'camry': ['supersonic-red', 'wind-chill-pearl', 'midnight-black-metallic', 'magnetic-gray-metallic', 'celestial-silver-metallic', 'underground', 'reservoir-blue', 'ice-cap', 'heavy-metal'],
            'crown': ['oxygen-white', 'midnight-black-metallic', 'magnetic-gray-metallic', 'supersonic-red', 'precious-bronze', 'cutting-edge', 'heavy-metal', 'blueprint'],
            'crownsignia': ['oxygen-white', 'midnight-black-metallic', 'magnetic-gray-metallic', 'supersonic-red', 'precious-bronze', 'cutting-edge', 'heavy-metal'],
            'prius': ['wind-chill-pearl', 'midnight-black-metallic', 'electric-storm-blue', 'magnetic-gray-metallic', 'supersonic-red', 'blueprint', 'heavy-metal', 'reservoir-blue'],
            'corollahatchback': ['supersonic-red', 'wind-chill-pearl', 'midnight-black-metallic', 'magnetic-gray-metallic', 'blueprint', 'ice-cap', 'heavy-metal'],
            'corollacross': ['supersonic-red', 'wind-chill-pearl', 'midnight-black-metallic', 'magnetic-gray-metallic', 'cavalry-blue', 'ice-cap', 'urban-khaki', 'blueprint'],
            'rav4': ['supersonic-red', 'wind-chill-pearl', 'midnight-black-metallic', 'magnetic-gray-metallic', 'cavalry-blue', 'lunar-rock', 'urban-khaki', 'blueprint', 'ruby-flare-pearl', 'ice-cap', 'silver-sky-metallic'],
            'venza': ['wind-chill-pearl', 'midnight-black-metallic', 'magnetic-gray-metallic', 'celestial-silver-metallic', 'ruby-flare-pearl', 'cavalry-blue', 'blueprint'],
            'highlander': ['wind-chill-pearl', 'midnight-black-metallic', 'magnetic-gray-metallic', 'celestial-silver-metallic', 'supersonic-red', 'blueprint', 'cypress', 'moon-dust', 'ruby-flare-pearl'],
            'grandhighlander': ['wind-chill-pearl', 'midnight-black-metallic', 'magnetic-gray-metallic', 'celestial-silver-metallic', 'supersonic-red', 'blueprint', 'cypress', 'moon-dust'],
            '4runner': ['white', 'midnight-black-metallic', 'magnetic-gray-metallic', 'lunar-rock', 'army-green', 'bronze-oxide', 'supersonic-red', 'mud-pie', 'everest', 'blueprint'],
            'sequoia': ['wind-chill-pearl', 'midnight-black-metallic', 'magnetic-gray-metallic', 'celestial-silver-metallic', 'supersonic-red', 'blueprint', 'lunar-rock', 'heavy-metal'],
            'landcruiser': ['white', 'midnight-black-metallic', 'magnetic-gray-metallic', 'underground', 'bronze-oxide', 'army-green', 'everest', 'heritage-blue'],
            'bz4x': ['wind-chill-pearl', 'midnight-black-metallic', 'magnetic-gray-metallic', 'elemental-silver', 'cavalry-blue', 'heavy-metal', 'supersonic-red'],
            'tacoma': ['supersonic-red', 'white', 'midnight-black-metallic', 'magnetic-gray-metallic', 'celestial-silver-metallic', 'ice-cap', 'cavalry-blue', 'army-green', 'bronze-oxide', 'underground', 'solar-shift', 'terra', 'lime-rush'],
            'tundra': ['white', 'midnight-black-metallic', 'magnetic-gray-metallic', 'celestial-silver-metallic', 'supersonic-red', 'army-green', 'blueprint', 'lunar-rock', 'solar-shift', 'heavy-metal'],
            'sienna': ['wind-chill-pearl', 'midnight-black-metallic', 'magnetic-gray-metallic', 'celestial-silver-metallic', 'supersonic-red', 'blueprint', 'predawn-gray-mica', 'opulent-amber', 'cypress'],
            'gr86': ['supersonic-red', 'halo', 'midnight-black-metallic', 'stratosphere-blue', 'track-brat-red', 'neptune', 'ice-cap', 'turbulence-gray'],
            'grsupra': ['renaissance-red', 'absolute-zero', 'midnight-black-metallic', 'nitro-yellow', 'phantom', 'turbulence-gray', 'stratosphere-blue'],
            'grcorollamorizo': ['supersonic-red', 'halo', 'midnight-black-metallic', 'heavy-metal', 'ice-cap', 'underground']
        };

        // Add fallback colors for vehicles not in the list
        const defaultColors = ['white', 'midnight-black-metallic', 'magnetic-gray-metallic', 'celestial-silver-metallic', 'supersonic-red'];

        // ===========================================
        // VEHICLE DATABASE
        // ===========================================

        const vehicles = [
            // SEDANS
            {
                id: 'corolla',
                name: 'Corolla',
                category: 'sedan',
                tagline: "America's best-selling compact sedan",
                year: 2025,
                msrp: 24100,
                msrpRange: '$24,100 - $29,800',
                hybrid: true,
                badges: [],
                specs: {
                    dimensions: {
                        length: '182.5"',
                        width: '70.1"',
                        height: '56.5"',
                        wheelbase: '106.3"',
                        groundClearance: '5.3"',
                        curbWeight: '3,060 - 3,270 lbs'
                    },
                    interior: {
                        seating: '5 passengers',
                        headroomFront: '38.3"',
                        headroomRear: '37.1"',
                        legroomFront: '42.0"',
                        legroomRear: '34.8"',
                        cargoVolume: '13.1 cu. ft.'
                    },
                    performance: {
                        engine: '2.0L 4-Cylinder',
                        horsepower: '169 hp',
                        torque: '151 lb-ft',
                        transmission: 'CVT / 6-Speed Manual',
                        drivetrain: 'FWD / AWD available',
                        mpgCity: '31',
                        mpgHighway: '40',
                        mpgCombined: '34'
                    },
                    hybridSpecs: {
                        engine: '1.8L 4-Cylinder Hybrid',
                        combinedHp: '138 hp',
                        mpgCity: '53',
                        mpgHighway: '46',
                        mpgCombined: '50'
                    }
                },
                trims: [
                    { name: 'LE', price: '$24,100' },
                    { name: 'SE', price: '$26,100' },
                    { name: 'XSE', price: '$28,200' },
                    { name: 'Hybrid LE', price: '$25,100' },
                    { name: 'Hybrid SE', price: '$27,200' },
                    { name: 'Hybrid XSE', price: '$29,800' }
                ],
                features: ['Toyota Safety Sense 3.0', 'Apple CarPlay/Android Auto', '8" Touchscreen', 'Wireless Charging', 'LED Headlights']
            },
            {
                id: 'camry',
                name: 'Camry',
                category: 'sedan',
                tagline: "America's best-selling midsize sedan - All Hybrid",
                year: 2025,
                msrp: 30200,
                msrpRange: '$30,200 - $37,500',
                hybrid: true,
                badges: ['Best Seller', 'All Hybrid'],
                specs: {
                    dimensions: {
                        length: '192.1"',
                        width: '72.4"',
                        height: '56.9"',
                        wheelbase: '111.2"',
                        groundClearance: '5.7"',
                        curbWeight: '3,472 - 3,638 lbs'
                    },
                    interior: {
                        seating: '5 passengers',
                        headroomFront: '38.3"',
                        headroomRear: '37.8"',
                        legroomFront: '42.1"',
                        legroomRear: '38.0"',
                        cargoVolume: '15.1 cu. ft.'
                    },
                    performance: {
                        engine: '2.5L 4-Cylinder Hybrid',
                        horsepower: '225 hp (combined)',
                        torque: '163 lb-ft',
                        transmission: 'eCVT',
                        drivetrain: 'FWD / AWD available',
                        mpgCity: '51',
                        mpgHighway: '53',
                        mpgCombined: '52'
                    }
                },
                trims: [
                    { name: 'LE', price: '$30,200' },
                    { name: 'SE', price: '$32,000' },
                    { name: 'XLE', price: '$34,500' },
                    { name: 'XSE', price: '$35,300' },
                    { name: 'XLE AWD', price: '$36,000' },
                    { name: 'XSE AWD', price: '$37,500' }
                ],
                features: ['All Hybrid Lineup', 'Toyota Safety Sense 3.0', '12.3" Touchscreen', 'Wireless CarPlay/Android Auto', 'Digital Key']
            },
            {
                id: 'crown',
                name: 'Crown',
                category: 'sedan',
                tagline: 'Bold design meets hybrid efficiency',
                year: 2025,
                msrp: 44700,
                msrpRange: '$44,700 - $57,500',
                hybrid: true,
                badges: ['Premium'],
                specs: {
                    dimensions: {
                        length: '196.1"',
                        width: '72.4"',
                        height: '60.6"',
                        wheelbase: '112.2"',
                        groundClearance: '6.7"',
                        curbWeight: '4,145 - 4,365 lbs'
                    },
                    interior: {
                        seating: '5 passengers',
                        headroomFront: '37.8"',
                        headroomRear: '36.8"',
                        legroomFront: '42.1"',
                        legroomRear: '38.9"',
                        cargoVolume: '15.2 cu. ft.'
                    },
                    performance: {
                        engine: '2.5L 4-Cyl Hybrid / 2.4L Turbo Hybrid MAX',
                        horsepower: '236 hp / 340 hp',
                        torque: '162 lb-ft / 400 lb-ft',
                        transmission: 'eCVT / 6-Speed Auto',
                        drivetrain: 'AWD Standard',
                        mpgCity: '41 / 29',
                        mpgHighway: '41 / 32',
                        mpgCombined: '41 / 30'
                    }
                },
                trims: [
                    { name: 'XLE', price: '$44,700' },
                    { name: 'Limited', price: '$54,200' },
                    { name: 'Platinum', price: '$57,500' }
                ],
                features: ['Standard AWD', 'Hybrid Powertrain', '12.3" Touchscreen', 'Digital Rearview Mirror', 'Panoramic Roof']
            },
            {
                id: 'crownsignia',
                name: 'Crown Signia',
                category: 'suv',
                tagline: 'Premium crossover with Crown DNA',
                year: 2025,
                msrp: 45500,
                msrpRange: '$45,500 - $56,000',
                hybrid: true,
                badges: ['New', 'All Hybrid'],
                specs: {
                    dimensions: {
                        length: '194.5"',
                        width: '75.0"',
                        height: '65.4"',
                        wheelbase: '112.2"',
                        groundClearance: '7.2"',
                        curbWeight: '4,410 - 4,580 lbs'
                    },
                    interior: {
                        seating: '5 passengers',
                        headroomFront: '38.5"',
                        headroomRear: '38.0"',
                        legroomFront: '42.1"',
                        legroomRear: '39.8"',
                        cargoVolume: '35.0 cu. ft.',
                        maxCargo: '72.0 cu. ft.'
                    },
                    performance: {
                        engine: '2.5L 4-Cylinder Hybrid',
                        horsepower: '243 hp (combined)',
                        torque: '163 lb-ft',
                        transmission: 'eCVT',
                        drivetrain: 'AWD Standard',
                        mpgCity: '38',
                        mpgHighway: '35',
                        mpgCombined: '36'
                    }
                },
                trims: [
                    { name: 'XLE', price: '$45,500' },
                    { name: 'Limited', price: '$51,500' },
                    { name: 'Platinum', price: '$56,000' }
                ],
                features: ['100% Hybrid', 'Standard AWD', '12.3" Touchscreen', 'Premium Audio', 'Panoramic Roof', 'Hands-Free Liftgate']
            },
            {
                id: 'prius',
                name: 'Prius',
                category: 'hatchback',
                tagline: 'The original hybrid, reimagined',
                year: 2025,
                msrp: 30600,
                msrpRange: '$30,600 - $42,000',
                hybrid: true,
                badges: ['Hybrid Icon'],
                specs: {
                    dimensions: {
                        length: '181.1"',
                        width: '69.3"',
                        height: '56.3"',
                        wheelbase: '108.3"',
                        groundClearance: '5.1"',
                        curbWeight: '3,097 - 3,340 lbs'
                    },
                    interior: {
                        seating: '5 passengers',
                        headroomFront: '37.7"',
                        headroomRear: '35.9"',
                        legroomFront: '42.4"',
                        legroomRear: '35.4"',
                        cargoVolume: '20.3 cu. ft.'
                    },
                    performance: {
                        engine: '2.0L 4-Cylinder Hybrid',
                        horsepower: '196 hp (combined)',
                        torque: '139 lb-ft',
                        transmission: 'eCVT',
                        drivetrain: 'FWD / AWD available',
                        mpgCity: '57',
                        mpgHighway: '56',
                        mpgCombined: '57'
                    },
                    primeSpecs: {
                        type: 'Plug-in Hybrid',
                        evRange: '44 miles',
                        totalRange: '600+ miles',
                        mpge: '127 MPGe',
                        chargeTime: '2 hrs (240V)'
                    }
                },
                trims: [
                    { name: 'LE', price: '$30,600' },
                    { name: 'XLE', price: '$34,200' },
                    { name: 'Limited', price: '$37,800' },
                    { name: 'Prime SE', price: '$35,400' },
                    { name: 'Prime XSE', price: '$42,000' }
                ],
                features: ['Up to 57 MPG', 'Plug-in Option (Prime)', 'Solar Roof Available', 'Toyota Safety Sense 3.0', 'Head-Up Display']
            },
            {
                id: 'corollahatchback',
                name: 'Corolla Hatchback',
                category: 'hatchback',
                tagline: 'Sporty, versatile, and fun to drive',
                year: 2025,
                msrp: 24950,
                msrpRange: '$24,950 - $31,200',
                hybrid: true,
                badges: ['Manual Available'],
                specs: {
                    dimensions: {
                        length: '169.9"',
                        width: '70.1"',
                        height: '56.9"',
                        wheelbase: '103.9"',
                        groundClearance: '5.1"',
                        curbWeight: '2,955 - 3,220 lbs'
                    },
                    interior: {
                        seating: '5 passengers',
                        headroomFront: '38.4"',
                        headroomRear: '37.5"',
                        legroomFront: '42.0"',
                        legroomRear: '29.9"',
                        cargoVolume: '17.8 cu. ft.',
                        maxCargo: '23.3 cu. ft.'
                    },
                    performance: {
                        engine: '2.0L 4-Cylinder',
                        horsepower: '169 hp',
                        torque: '151 lb-ft',
                        transmission: 'CVT / 6-Speed iMT',
                        drivetrain: 'FWD',
                        mpgCity: '32',
                        mpgHighway: '41',
                        mpgCombined: '35'
                    },
                    hybridSpecs: {
                        engine: '1.8L 4-Cylinder Hybrid',
                        combinedHp: '138 hp',
                        mpgCity: '53',
                        mpgHighway: '46',
                        mpgCombined: '50'
                    }
                },
                trims: [
                    { name: 'SE', price: '$24,950' },
                    { name: 'SE Manual', price: '$25,550' },
                    { name: 'XSE', price: '$28,400' },
                    { name: 'Hybrid SE', price: '$27,800' },
                    { name: 'Hybrid XSE', price: '$31,200' }
                ],
                features: ['6-Speed Manual Available', 'Toyota Safety Sense 3.0', 'Apple CarPlay/Android Auto', '8" Touchscreen', 'Sport-Tuned Suspension']
            },

            // SUVs
            {
                id: 'corollacross',
                name: 'Corolla Cross',
                category: 'suv',
                tagline: 'Compact crossover with big versatility',
                year: 2025,
                msrp: 25100,
                msrpRange: '$25,100 - $34,500',
                hybrid: true,
                badges: [],
                specs: {
                    dimensions: {
                        length: '175.6"',
                        width: '72.4"',
                        height: '64.8"',
                        wheelbase: '103.9"',
                        groundClearance: '8.1"',
                        curbWeight: '3,250 - 3,485 lbs'
                    },
                    interior: {
                        seating: '5 passengers',
                        headroomFront: '39.0"',
                        headroomRear: '38.0"',
                        legroomFront: '42.9"',
                        legroomRear: '32.0"',
                        cargoVolume: '24.3 cu. ft.',
                        maxCargo: '66.8 cu. ft.'
                    },
                    performance: {
                        engine: '2.0L 4-Cylinder',
                        horsepower: '169 hp',
                        torque: '151 lb-ft',
                        transmission: 'CVT',
                        drivetrain: 'FWD / AWD available',
                        mpgCity: '29',
                        mpgHighway: '32',
                        mpgCombined: '30'
                    },
                    hybridSpecs: {
                        engine: '2.0L 4-Cylinder Hybrid',
                        combinedHp: '196 hp',
                        mpgCity: '46',
                        mpgHighway: '43',
                        mpgCombined: '45'
                    }
                },
                trims: [
                    { name: 'L', price: '$25,100' },
                    { name: 'LE', price: '$26,500' },
                    { name: 'XLE', price: '$30,500' },
                    { name: 'Hybrid S', price: '$30,100' },
                    { name: 'Hybrid SE', price: '$31,800' },
                    { name: 'Hybrid XSE', price: '$34,500' }
                ],
                features: ['Available Hybrid AWD', '8.1" Ground Clearance', 'Toyota Safety Sense 3.0', '8" Touchscreen', 'LED Headlights']
            },
            {
                id: 'rav4',
                name: 'RAV4',
                category: 'suv',
                tagline: "America's best-selling SUV",
                year: 2025,
                msrp: 33400,
                msrpRange: '$33,400 - $44,500',
                hybrid: true,
                badges: ['Best Seller'],
                specs: {
                    dimensions: {
                        length: '180.9"',
                        width: '73.0"',
                        height: '67.0"',
                        wheelbase: '105.9"',
                        groundClearance: '8.4"',
                        curbWeight: '3,615 - 4,300 lbs'
                    },
                    interior: {
                        seating: '5 passengers',
                        headroomFront: '38.0"',
                        headroomRear: '37.8"',
                        legroomFront: '41.0"',
                        legroomRear: '37.8"',
                        cargoVolume: '37.6 cu. ft.',
                        maxCargo: '69.8 cu. ft.'
                    },
                    performance: {
                        engine: '2.5L 4-Cylinder',
                        horsepower: '203 hp',
                        torque: '184 lb-ft',
                        transmission: '8-Speed Auto',
                        drivetrain: 'FWD / AWD available',
                        mpgCity: '27',
                        mpgHighway: '35',
                        mpgCombined: '30',
                        towing: '1,500 lbs'
                    },
                    hybridSpecs: {
                        engine: '2.5L 4-Cyl Hybrid',
                        combinedHp: '219 hp',
                        mpgCity: '41',
                        mpgHighway: '38',
                        mpgCombined: '40'
                    },
                    primeSpecs: {
                        type: 'Plug-in Hybrid',
                        evRange: '42 miles',
                        totalRange: '600 miles',
                        combinedHp: '302 hp',
                        mpge: '94 MPGe'
                    }
                },
                trims: [
                    { name: 'LE', price: '$33,400' },
                    { name: 'XLE', price: '$35,600' },
                    { name: 'XLE Premium', price: '$38,900' },
                    { name: 'Adventure', price: '$40,700' },
                    { name: 'TRD Off-Road', price: '$42,200' },
                    { name: 'Limited', price: '$44,500' }
                ],
                features: ['Hybrid & Prime Options', '8.4" Ground Clearance', 'TRD Off-Road Trim', 'Adventure Grade', 'Multi-Terrain Select']
            },
            {
                id: 'venza',
                name: 'Venza',
                category: 'suv',
                tagline: 'Stylish hybrid crossover',
                year: 2025,
                msrp: 37800,
                msrpRange: '$37,800 - $46,600',
                hybrid: true,
                badges: ['All Hybrid'],
                specs: {
                    dimensions: {
                        length: '186.6"',
                        width: '73.0"',
                        height: '65.9"',
                        wheelbase: '105.9"',
                        groundClearance: '7.6"',
                        curbWeight: '3,986 - 4,100 lbs'
                    },
                    interior: {
                        seating: '5 passengers',
                        headroomFront: '37.8"',
                        headroomRear: '37.0"',
                        legroomFront: '42.0"',
                        legroomRear: '37.8"',
                        cargoVolume: '28.8 cu. ft.',
                        maxCargo: '55.4 cu. ft.'
                    },
                    performance: {
                        engine: '2.5L 4-Cylinder Hybrid',
                        horsepower: '219 hp (combined)',
                        torque: '163 lb-ft',
                        transmission: 'eCVT',
                        drivetrain: 'AWD Standard',
                        mpgCity: '40',
                        mpgHighway: '37',
                        mpgCombined: '39'
                    }
                },
                trims: [
                    { name: 'LE', price: '$37,800' },
                    { name: 'XLE', price: '$41,900' },
                    { name: 'Limited', price: '$46,600' }
                ],
                features: ['100% Hybrid', 'Star Gaze Roof', 'AWD Standard', 'JBL Premium Audio', 'Digital Rearview Mirror']
            },
            {
                id: 'highlander',
                name: 'Highlander',
                category: 'suv',
                tagline: 'The 3-row family favorite',
                year: 2025,
                msrp: 42900,
                msrpRange: '$42,900 - $56,500',
                hybrid: true,
                badges: ['3-Row'],
                specs: {
                    dimensions: {
                        length: '194.9"',
                        width: '76.0"',
                        height: '68.1"',
                        wheelbase: '112.2"',
                        groundClearance: '8.0"',
                        curbWeight: '4,420 - 4,740 lbs'
                    },
                    interior: {
                        seating: '7-8 passengers',
                        headroomFront: '38.4"',
                        headroomRear: '38.2"',
                        headroom3rd: '35.8"',
                        legroomFront: '44.2"',
                        legroomRear: '41.0"',
                        legroom3rd: '27.7"',
                        cargoVolume: '16.0 cu. ft.',
                        maxCargo: '84.3 cu. ft.'
                    },
                    performance: {
                        engine: '2.4L Turbo 4-Cylinder',
                        horsepower: '265 hp',
                        torque: '310 lb-ft',
                        transmission: '8-Speed Auto',
                        drivetrain: 'FWD / AWD available',
                        mpgCity: '22',
                        mpgHighway: '29',
                        mpgCombined: '25',
                        towing: '5,000 lbs'
                    },
                    hybridSpecs: {
                        engine: '2.5L 4-Cyl Hybrid',
                        combinedHp: '243 hp',
                        mpgCity: '36',
                        mpgHighway: '35',
                        mpgCombined: '36'
                    }
                },
                trims: [
                    { name: 'LE', price: '$42,900' },
                    { name: 'XLE', price: '$46,800' },
                    { name: 'XSE', price: '$49,900' },
                    { name: 'Limited', price: '$52,900' },
                    { name: 'Platinum', price: '$56,500' }
                ],
                features: ['7-8 Passenger Seating', '5,000 lbs Towing', 'Hybrid Available', '12.3" Touchscreen', 'Toyota Safety Sense 3.0']
            },
            {
                id: 'grandhighlander',
                name: 'Grand Highlander',
                category: 'suv',
                tagline: 'More room for everything',
                year: 2025,
                msrp: 47200,
                msrpRange: '$47,200 - $63,000',
                hybrid: true,
                badges: ['3-Row'],
                specs: {
                    dimensions: {
                        length: '201.4"',
                        width: '76.4"',
                        height: '69.4"',
                        wheelbase: '116.1"',
                        groundClearance: '8.0"',
                        curbWeight: '4,725 - 5,165 lbs'
                    },
                    interior: {
                        seating: '7-8 passengers',
                        headroomFront: '39.4"',
                        headroomRear: '39.2"',
                        headroom3rd: '36.0"',
                        legroomFront: '44.2"',
                        legroomRear: '42.0"',
                        legroom3rd: '32.0"',
                        cargoVolume: '21.0 cu. ft.',
                        maxCargo: '97.5 cu. ft.'
                    },
                    performance: {
                        engine: '2.4L Turbo 4-Cyl',
                        horsepower: '265 hp',
                        torque: '310 lb-ft',
                        transmission: '8-Speed Auto',
                        drivetrain: 'FWD / AWD available',
                        mpgCity: '21',
                        mpgHighway: '28',
                        mpgCombined: '24',
                        towing: '5,000 lbs'
                    },
                    hybridSpecs: {
                        engine: '2.5L Hybrid',
                        combinedHp: '243 hp',
                        mpgCity: '35',
                        mpgHighway: '32',
                        mpgCombined: '34'
                    },
                    hybridMaxSpecs: {
                        engine: '2.4L Turbo Hybrid MAX',
                        combinedHp: '362 hp',
                        mpgCombined: '27'
                    }
                },
                trims: [
                    { name: 'XLE', price: '$47,200' },
                    { name: 'XSE', price: '$49,300' },
                    { name: 'Limited', price: '$53,600' },
                    { name: 'Platinum', price: '$58,000' },
                    { name: 'Hybrid Max Limited', price: '$59,900' },
                    { name: 'Hybrid Max Platinum', price: '$63,000' }
                ],
                features: ['Longest Wheelbase in Class', '97.5 cu ft Cargo', 'Hybrid MAX 362hp', 'Digital Key', 'Panoramic Moonroof']
            },
            {
                id: '4runner',
                name: '4Runner',
                category: 'suv',
                tagline: 'Legendary off-road capability',
                year: 2025,
                msrp: 45800,
                msrpRange: '$45,800 - $71,000',
                hybrid: true,
                badges: ['Off-Road', 'Redesigned'],
                specs: {
                    dimensions: {
                        length: '190.0"',
                        width: '78.3"',
                        height: '71.5"',
                        wheelbase: '112.2"',
                        groundClearance: '9.0"',
                        approachAngle: '31',
                        departureAngle: '24',
                        curbWeight: '4,785 - 5,115 lbs'
                    },
                    interior: {
                        seating: '5-7 passengers',
                        headroomFront: '39.3"',
                        headroomRear: '38.5"',
                        legroomFront: '42.6"',
                        legroomRear: '36.3"',
                        cargoVolume: '41.7 cu. ft.',
                        maxCargo: '82.9 cu. ft.'
                    },
                    performance: {
                        engine: '2.4L Turbo 4-Cyl i-FORCE',
                        horsepower: '278 hp',
                        torque: '317 lb-ft',
                        transmission: '8-Speed Auto',
                        drivetrain: '4WD Standard',
                        mpgCity: '17',
                        mpgHighway: '22',
                        mpgCombined: '19',
                        towing: '6,000 lbs'
                    },
                    hybridSpecs: {
                        engine: '2.4L Turbo Hybrid i-FORCE MAX',
                        combinedHp: '326 hp',
                        torque: '465 lb-ft',
                        mpgCombined: '23',
                        towing: '6,500 lbs'
                    }
                },
                trims: [
                    { name: 'SR5', price: '$45,800' },
                    { name: 'SR5 Premium', price: '$48,900' },
                    { name: 'TRD Sport', price: '$51,500' },
                    { name: 'TRD Off-Road', price: '$54,100' },
                    { name: 'TRD Off-Road Premium', price: '$57,200' },
                    { name: 'Limited', price: '$57,300' },
                    { name: 'Platinum', price: '$61,000' },
                    { name: 'TRD Pro', price: '$71,000' }
                ],
                features: ['Redesigned Platform', 'Hybrid Available', 'i-FORCE MAX', '9" Ground Clearance', 'Crawl Control', 'Multi-Terrain Select']
            },
            {
                id: 'sequoia',
                name: 'Sequoia',
                category: 'suv',
                tagline: 'Full-size capability, hybrid efficiency',
                year: 2025,
                msrp: 64400,
                msrpRange: '$64,400 - $83,500',
                hybrid: true,
                badges: ['Full-Size', 'Hybrid'],
                specs: {
                    dimensions: {
                        length: '208.1"',
                        width: '79.6"',
                        height: '76.0"',
                        wheelbase: '122.0"',
                        groundClearance: '9.5"',
                        curbWeight: '5,945 - 6,340 lbs'
                    },
                    interior: {
                        seating: '7-8 passengers',
                        headroomFront: '40.1"',
                        headroomRear: '40.5"',
                        headroom3rd: '36.2"',
                        legroomFront: '44.0"',
                        legroomRear: '42.3"',
                        legroom3rd: '32.3"',
                        cargoVolume: '22.7 cu. ft.',
                        maxCargo: '86.9 cu. ft.'
                    },
                    performance: {
                        engine: '3.5L V6 Twin-Turbo i-FORCE MAX Hybrid',
                        horsepower: '437 hp',
                        torque: '583 lb-ft',
                        transmission: '10-Speed Auto',
                        drivetrain: '4WD Standard',
                        mpgCity: '19',
                        mpgHighway: '22',
                        mpgCombined: '21',
                        towing: '9,520 lbs'
                    }
                },
                trims: [
                    { name: 'SR5', price: '$64,400' },
                    { name: 'Limited', price: '$70,000' },
                    { name: 'Platinum', price: '$75,200' },
                    { name: 'TRD Pro', price: '$79,300' },
                    { name: 'Capstone', price: '$83,500' }
                ],
                features: ['Standard Hybrid', '9,520 lbs Towing', 'Multi-Terrain Select', 'Crawl Control', 'Air Suspension Available']
            },
            {
                id: 'landcruiser',
                name: 'Land Cruiser',
                category: 'suv',
                tagline: 'Legendary. Reimagined.',
                year: 2025,
                msrp: 59900,
                msrpRange: '$59,900 - $79,500',
                hybrid: true,
                badges: ['Iconic'],
                specs: {
                    dimensions: {
                        length: '195.3"',
                        width: '78.0"',
                        height: '72.6"',
                        wheelbase: '112.2"',
                        groundClearance: '8.7"',
                        approachAngle: '31',
                        departureAngle: '22',
                        curbWeight: '5,100 - 5,400 lbs'
                    },
                    interior: {
                        seating: '5 passengers',
                        headroomFront: '39.3"',
                        headroomRear: '38.3"',
                        legroomFront: '42.6"',
                        legroomRear: '36.4"',
                        cargoVolume: '40.0 cu. ft.',
                        maxCargo: '76.0 cu. ft.'
                    },
                    performance: {
                        engine: '2.4L Turbo 4-Cyl i-FORCE',
                        horsepower: '278 hp',
                        torque: '317 lb-ft',
                        transmission: '8-Speed Auto',
                        drivetrain: '4WD Standard',
                        mpgCity: '18',
                        mpgHighway: '22',
                        mpgCombined: '20',
                        towing: '6,000 lbs'
                    },
                    hybridSpecs: {
                        engine: '2.4L Turbo i-FORCE MAX Hybrid',
                        combinedHp: '326 hp',
                        torque: '465 lb-ft',
                        mpgCombined: '23',
                        towing: '6,000 lbs'
                    }
                },
                trims: [
                    { name: '1958', price: '$59,900' },
                    { name: 'First Edition', price: '$79,500' }
                ],
                features: ['Return to US Market', 'Classic Round Headlights', 'Hybrid Available', 'Modern Tech', 'Heritage Design']
            },
            {
                id: 'bz4x',
                name: 'bZ4X',
                category: 'suv',
                tagline: 'All-electric adventure',
                year: 2025,
                msrp: 45000,
                msrpRange: '$45,000 - $51,500',
                hybrid: false,
                badges: ['Electric'],
                specs: {
                    dimensions: {
                        length: '184.6"',
                        width: '73.2"',
                        height: '65.0"',
                        wheelbase: '112.2"',
                        groundClearance: '8.1"',
                        curbWeight: '4,255 - 4,541 lbs'
                    },
                    interior: {
                        seating: '5 passengers',
                        headroomFront: '39.5"',
                        headroomRear: '38.5"',
                        legroomFront: '42.0"',
                        legroomRear: '35.2"',
                        cargoVolume: '27.7 cu. ft.'
                    },
                    performance: {
                        engine: 'Single/Dual Electric Motors',
                        horsepower: '201 hp (FWD) / 214 hp (AWD)',
                        torque: '196 lb-ft / 248 lb-ft',
                        transmission: 'Direct Drive',
                        drivetrain: 'FWD / AWD',
                        range: '252 mi (FWD) / 228 mi (AWD)',
                        chargeTime: '~1 hour (DC Fast)',
                        homeCharge: '~9 hours (240V)'
                    }
                },
                trims: [
                    { name: 'XLE FWD', price: '$45,000' },
                    { name: 'XLE AWD', price: '$47,500' },
                    { name: 'Limited AWD', price: '$51,500' }
                ],
                features: ['Up to 252 mi Range', 'DC Fast Charging', 'Solar Roof Available', 'X-MODE AWD', 'Toyota Safety Sense 3.0']
            },

            // TRUCKS
            {
                id: 'tacoma',
                name: 'Tacoma',
                category: 'truck',
                tagline: 'Built for adventure',
                year: 2025,
                msrp: 34500,
                msrpRange: '$34,500 - $72,000',
                hybrid: true,
                badges: ['Best Seller'],
                specs: {
                    dimensions: {
                        length: '212.3" - 225.5"',
                        width: '75.2"',
                        height: '71.5"',
                        wheelbase: '128.1" - 140.6"',
                        groundClearance: '8.7" - 9.8"',
                        bedLength: '5\' / 6\'',
                        curbWeight: '4,515 - 5,275 lbs'
                    },
                    interior: {
                        seating: '4-5 passengers',
                        headroomFront: '39.1"',
                        headroomRear: '38.2"',
                        legroomFront: '42.9"',
                        legroomRear: '32.8"'
                    },
                    performance: {
                        engine: '2.4L Turbo 4-Cyl i-FORCE',
                        horsepower: '278 hp',
                        torque: '317 lb-ft',
                        transmission: '8-Speed Auto / 6-Speed Manual',
                        drivetrain: 'RWD / 4WD',
                        mpgCity: '19',
                        mpgHighway: '24',
                        mpgCombined: '21',
                        payloadMax: '2,615 lbs',
                        towingMax: '6,500 lbs'
                    },
                    hybridSpecs: {
                        engine: '2.4L Turbo i-FORCE MAX Hybrid',
                        combinedHp: '326 hp',
                        torque: '465 lb-ft',
                        mpgCombined: '24',
                        towingMax: '6,500 lbs'
                    }
                },
                trims: [
                    { name: 'SR', price: '$34,500' },
                    { name: 'SR5', price: '$37,600' },
                    { name: 'TRD PreRunner', price: '$41,800' },
                    { name: 'TRD Sport', price: '$42,900' },
                    { name: 'TRD Off-Road', price: '$45,100' },
                    { name: 'Limited', price: '$50,200' },
                    { name: 'Trailhunter', price: '$63,500' },
                    { name: 'TRD Pro', price: '$72,000' }
                ],
                features: ['New Generation Design', 'Hybrid i-FORCE MAX', 'Manual Available', 'Multi-Terrain Select', 'Crawl Control', 'Trailhunter Trim']
            },
            {
                id: 'tundra',
                name: 'Tundra',
                category: 'truck',
                tagline: 'Full-size, fully capable',
                year: 2025,
                msrp: 43400,
                msrpRange: '$43,400 - $81,500',
                hybrid: true,
                badges: ['Full-Size'],
                specs: {
                    dimensions: {
                        length: '228.0" - 247.0"',
                        width: '79.9"',
                        height: '78.0"',
                        wheelbase: '145.7" - 157.7"',
                        groundClearance: '10.6" (TRD Pro)',
                        bedLength: '5.5\' / 6.5\' / 8.1\'',
                        curbWeight: '5,175 - 6,030 lbs'
                    },
                    interior: {
                        seating: '5-6 passengers',
                        headroomFront: '40.3"',
                        headroomRear: '39.7"',
                        legroomFront: '44.0"',
                        legroomRear: '42.0"'
                    },
                    performance: {
                        engine: '3.5L V6 Twin-Turbo i-FORCE',
                        horsepower: '389 hp',
                        torque: '479 lb-ft',
                        transmission: '10-Speed Auto',
                        drivetrain: 'RWD / 4WD',
                        mpgCity: '17',
                        mpgHighway: '23',
                        mpgCombined: '19',
                        payloadMax: '1,940 lbs',
                        towingMax: '12,000 lbs'
                    },
                    hybridSpecs: {
                        engine: '3.5L V6 Twin-Turbo i-FORCE MAX Hybrid',
                        combinedHp: '437 hp',
                        torque: '583 lb-ft',
                        mpgCombined: '20',
                        towingMax: '11,450 lbs'
                    }
                },
                trims: [
                    { name: 'SR', price: '$43,400' },
                    { name: 'SR5', price: '$46,900' },
                    { name: 'Limited', price: '$56,800' },
                    { name: 'Platinum', price: '$61,400' },
                    { name: '1794 Edition', price: '$62,900' },
                    { name: 'TRD Pro', price: '$71,700' },
                    { name: 'Capstone', price: '$81,500' }
                ],
                features: ['i-FORCE MAX Hybrid', '12,000 lbs Towing', 'Coil Spring Rear', 'Load-Leveling Air Suspension', 'Multi-Terrain Select']
            },

            // VANS
            {
                id: 'sienna',
                name: 'Sienna',
                category: 'van',
                tagline: 'The hybrid family mover',
                year: 2025,
                msrp: 41500,
                msrpRange: '$41,500 - $56,500',
                hybrid: true,
                badges: ['All Hybrid'],
                specs: {
                    dimensions: {
                        length: '203.7"',
                        width: '78.5"',
                        height: '69.7"',
                        wheelbase: '120.5"',
                        groundClearance: '6.5"',
                        curbWeight: '4,625 - 4,885 lbs'
                    },
                    interior: {
                        seating: '7-8 passengers',
                        headroomFront: '40.1"',
                        headroomRear: '39.9"',
                        headroom3rd: '38.0"',
                        legroomFront: '40.5"',
                        legroomRear: '39.9"',
                        legroom3rd: '36.1"',
                        cargoVolume: '33.5 cu. ft.',
                        maxCargo: '101.0 cu. ft.'
                    },
                    performance: {
                        engine: '2.5L 4-Cyl Hybrid',
                        horsepower: '245 hp (combined)',
                        torque: '176 lb-ft',
                        transmission: 'eCVT',
                        drivetrain: 'FWD / AWD',
                        mpgCity: '36',
                        mpgHighway: '36',
                        mpgCombined: '36',
                        towing: '3,500 lbs'
                    }
                },
                trims: [
                    { name: 'LE', price: '$41,500' },
                    { name: 'XLE', price: '$46,700' },
                    { name: 'XSE', price: '$49,200' },
                    { name: 'Woodland Edition', price: '$49,400' },
                    { name: 'Limited', price: '$51,800' },
                    { name: 'Platinum', price: '$56,500' }
                ],
                features: ['100% Hybrid', '36 MPG Combined', 'Available AWD', 'Power Sliding Doors', 'Woodland Off-Road Trim', '3,500 lbs Towing']
            },

            // SPORTS
            {
                id: 'gr86',
                name: 'GR86',
                category: 'sports',
                tagline: 'Pure driving excitement',
                year: 2025,
                msrp: 31500,
                msrpRange: '$31,500 - $36,800',
                hybrid: false,
                badges: ['Sports Car'],
                specs: {
                    dimensions: {
                        length: '167.9"',
                        width: '69.9"',
                        height: '51.6"',
                        wheelbase: '101.4"',
                        groundClearance: '5.1"',
                        curbWeight: '2,851 - 2,881 lbs'
                    },
                    interior: {
                        seating: '4 passengers (2+2)',
                        headroomFront: '37.0"',
                        legroomFront: '41.9"',
                        cargoVolume: '6.3 cu. ft.'
                    },
                    performance: {
                        engine: '2.4L Boxer 4-Cylinder',
                        horsepower: '228 hp',
                        torque: '184 lb-ft',
                        transmission: '6-Speed Manual / 6-Speed Auto',
                        drivetrain: 'RWD',
                        mpgCity: '20',
                        mpgHighway: '27',
                        mpgCombined: '22',
                        zeroToSixty: '6.1 seconds'
                    }
                },
                trims: [
                    { name: 'Base', price: '$31,500' },
                    { name: 'Premium', price: '$35,100' },
                    { name: 'Trueno Edition', price: '$36,800' }
                ],
                features: ['Rear-Wheel Drive', '6-Speed Manual Standard', 'Track-Ready', 'Subaru Boxer Engine', 'Limited Slip Diff']
            },
            {
                id: 'grsupra',
                name: 'GR Supra',
                category: 'sports',
                tagline: 'Legend reborn',
                year: 2025,
                msrp: 47600,
                msrpRange: '$47,600 - $67,500',
                hybrid: false,
                badges: ['Legendary'],
                specs: {
                    dimensions: {
                        length: '172.5"',
                        width: '73.0"',
                        height: '50.9"',
                        wheelbase: '97.2"',
                        groundClearance: '4.5"',
                        curbWeight: '3,181 - 3,497 lbs'
                    },
                    interior: {
                        seating: '2 passengers',
                        headroomFront: '37.6"',
                        legroomFront: '42.2"',
                        cargoVolume: '10.2 cu. ft.'
                    },
                    performance: {
                        engine: '2.0L Turbo 4-Cyl / 3.0L Turbo Inline-6',
                        horsepower: '255 hp / 382 hp',
                        torque: '295 lb-ft / 368 lb-ft',
                        transmission: '8-Speed Auto / 6-Speed Manual',
                        drivetrain: 'RWD',
                        mpgCity: '22 / 17',
                        mpgHighway: '32 / 25',
                        mpgCombined: '26 / 20',
                        zeroToSixty: '5.0s / 3.9s'
                    }
                },
                trims: [
                    { name: '2.0', price: '$47,600' },
                    { name: '3.0', price: '$55,400' },
                    { name: '3.0 Premium', price: '$58,500' },
                    { name: 'A91-MT Edition', price: '$67,500' }
                ],
                features: ['BMW-Toyota Collaboration', 'Manual Available (3.0)', 'Inline-6 Turbo', 'Launch Control', 'Active Differential']
            },
            {
                id: 'grcorollamorizo',
                name: 'GR Corolla',
                category: 'sports',
                tagline: 'Born from motorsports',
                year: 2025,
                msrp: 39200,
                msrpRange: '$39,200 - $61,500',
                hybrid: false,
                badges: ['Hot Hatch', 'AWD'],
                specs: {
                    dimensions: {
                        length: '169.9"',
                        width: '72.4"',
                        height: '57.9"',
                        wheelbase: '103.9"',
                        groundClearance: '5.4"',
                        curbWeight: '3,252 - 3,461 lbs'
                    },
                    interior: {
                        seating: '5 passengers',
                        headroomFront: '37.9"',
                        headroomRear: '37.5"',
                        legroomFront: '42.0"',
                        legroomRear: '29.9"',
                        cargoVolume: '7.8 cu. ft.'
                    },
                    performance: {
                        engine: '1.6L Turbo 3-Cylinder',
                        horsepower: '300 hp (Morizo 330 hp)',
                        torque: '273 lb-ft (295 lb-ft)',
                        transmission: '6-Speed Manual Only',
                        drivetrain: 'GR-FOUR AWD',
                        mpgCity: '21',
                        mpgHighway: '28',
                        mpgCombined: '24',
                        zeroToSixty: '4.8 seconds'
                    }
                },
                trims: [
                    { name: 'Core', price: '$39,200' },
                    { name: 'Circuit Edition', price: '$46,500' },
                    { name: 'Premium', price: '$48,400' },
                    { name: 'Morizo Edition', price: '$61,500' }
                ],
                features: ['GR-FOUR AWD', '6-Speed Manual Only', 'Rally Heritage', 'Forged Carbon Roof (Morizo)', 'Torsen Diff']
            }
        ];

        // ===========================================
        // STATE
        // ===========================================
        let currentVehicle = null;
        let currentColorIndex = 0;
        let currentCategory = 'all';
        let searchQuery = '';

        // ===========================================
        // HELPER FUNCTIONS
        // ===========================================
        
        function getVehicleColors(vehicleId) {
            return vehicleColors[vehicleId] || defaultColors;
        }

        function getColorData(colorKey) {
            return colorDatabase[colorKey] || { name: colorKey, hex: '#888888', code: 'UNK' };
        }

        // Toyota's official image CDN
        const TOYOTA_CDN = 'https://tmna.aemassets.toyota.com/is/image/toyota/toyota/jellies';
        
        // Model configuration for CDN image URLs
        const modelImageConfig = {
            'corolla': { grade: 'le', modelCode: '1852' },
            'camry': { grade: 'le', modelCode: '2552' },
            'crown': { grade: 'xle', modelCode: '2540' },
            'crownsignia': { grade: 'xle', modelCode: '6260' },
            'prius': { grade: 'le', modelCode: '1223' },
            'corollahatchback': { grade: 'se', modelCode: '6271' },
            'corollacross': { grade: 'le', modelCode: '4430' },
            'rav4': { grade: 'le', modelCode: '4521' },
            'venza': { grade: 'le', modelCode: '2820' },
            'highlander': { grade: 'le', modelCode: '6946' },
            'grandhighlander': { grade: 'xle', modelCode: '6980' },
            '4runner': { grade: 'sr5', modelCode: '8664' },
            'sequoia': { grade: 'sr5', modelCode: '7921' },
            'landcruiser': { grade: '1958', modelCode: '7732' },
            'bz4x': { grade: 'xle', modelCode: '7502' },
            'tacoma': { grade: 'sr5', modelCode: '7540' },
            'tundra': { grade: 'sr5', modelCode: '8371' },
            'sienna': { grade: 'le', modelCode: '5401' },
            'gr86': { grade: 'base', modelCode: '6252' },
            'grsupra': { grade: '30', modelCode: '2551' },
            'grcorollamorizo': { grade: 'core', modelCode: '6275' }
        };

        function getVehicleImageUrl(vehicleId, year) {
            // Return base image URL for grid display
            return `${TOYOTA_CDN}/relative/${year}/${vehicleId}/base.png`;
        }
        
        function getColorImageUrl(vehicleId, colorCode, year = 2026) {
            const config = modelImageConfig[vehicleId];
            if (!config) {
                // Fallback to base image
                return `${TOYOTA_CDN}/relative/${year}/${vehicleId}/base.png`;
            }
            // Build full color-specific URL
            return `${TOYOTA_CDN}/max/${year}/${vehicleId}/${config.grade}/${config.modelCode}/${colorCode}/1.png?bg=fff&fmt=png&qlt=90&wid=600`;
        }

        function filterVehicles() {
            return vehicles.filter(v => {
                const matchCategory = currentCategory === 'all' || 
                    v.category === currentCategory ||
                    (currentCategory === 'hybrid' && v.hybrid);
                const matchSearch = v.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
                    v.tagline.toLowerCase().includes(searchQuery.toLowerCase());
                return matchCategory && matchSearch;
            });
        }

        function formatLabel(key) {
            return key
                .replace(/([A-Z])/g, ' $1')
                .replace(/^./, str => str.toUpperCase())
                .replace('Mpg', 'MPG')
                .replace('3rd', '3rd Row')
                .replace('Zero To Sixty', '0-60 MPH');
        }

        // ===========================================
        // RENDER FUNCTIONS
        // ===========================================

        function renderGrid() {
            const grid = document.getElementById('vehicleGrid');
            const filtered = filterVehicles();
            
            grid.innerHTML = filtered.map(v => {
                const colors = getVehicleColors(v.id);
                const displayColors = colors.slice(0, 6);
                const moreCount = colors.length - 6;
                const firstColor = getColorData(colors[0]);
                const baseImageUrl = getVehicleImageUrl(v.id, v.year);

                return `
                <div class="vehicle-card" onclick="openModal('${v.id}')">
                    <div class="vehicle-image" id="cardImage-${v.id}">
                        <img src="${baseImageUrl}" 
                             alt="${v.name}"
                             onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                        <i class="fas fa-car placeholder-icon" style="display: none;"></i>
                        ${v.badges.map(b => `<span class="vehicle-badge ${b.toLowerCase().includes('hybrid') || b.toLowerCase().includes('electric') ? 'hybrid' : ''}">${b}</span>`).join('')}
                        ${v.hybrid && !v.badges.some(b => b.toLowerCase().includes('hybrid') || b.toLowerCase().includes('electric')) ? '<span class="vehicle-badge hybrid">Hybrid</span>' : ''}
                    </div>
                    <div class="vehicle-info">
                        <div class="vehicle-name">${v.name}</div>
                        <div class="vehicle-tagline">${v.tagline}</div>
                        <div class="card-color-swatches">
                            ${displayColors.map((colorKey, index) => {
                                const color = getColorData(colorKey);
                                return `<div class="card-color-swatch ${index === 0 ? 'active' : ''}" 
                                            style="background: ${color.hex};" 
                                            title="${color.name}"
                                            onclick="event.stopPropagation(); selectCardColor('${v.id}', ${index})"></div>`;
                            }).join('')}
                            ${moreCount > 0 ? `<div class="card-color-swatch more">+${moreCount}</div>` : ''}
                        </div>
                        <div class="vehicle-quick-specs">
                            <div class="quick-spec">
                                <span class="quick-spec-label">Starting</span>
                                <span class="quick-spec-value">$${v.msrp.toLocaleString()}</span>
                            </div>
                            <div class="quick-spec">
                                <span class="quick-spec-label">MPG</span>
                                <span class="quick-spec-value">${v.specs.performance.mpgCombined || v.specs.performance.range || 'N/A'}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `}).join('');
        }

        function selectCardColor(vehicleId, colorIndex) {
            const v = vehicles.find(x => x.id === vehicleId);
            const colors = getVehicleColors(vehicleId);
            const colorKey = colors[colorIndex];
            const color = getColorData(colorKey);

            // Update swatch active states
            const card = document.querySelector(`#cardImage-${vehicleId}`).parentElement;
            card.querySelectorAll('.card-color-swatch').forEach((swatch, idx) => {
                swatch.classList.toggle('active', idx === colorIndex);
            });

            // Note: In a full implementation, we'd update the card image here
            // For now, the swatches provide visual feedback
        }

        function openModal(vehicleId) {
            const v = vehicles.find(x => x.id === vehicleId);
            if (!v) return;

            currentVehicle = v;
            currentColorIndex = 0;

            // Set basic info
            document.getElementById('modalYear').textContent = v.year;
            document.getElementById('modalTitle').textContent = v.name;
            document.getElementById('modalTagline').textContent = v.tagline;
            document.getElementById('modalPrice').textContent = v.msrpRange;
            document.getElementById('toyotaLink').href = `https://www.toyota.com/${v.id.replace('gr', 'gr-').replace('morizo', '')}`;
            document.getElementById('configuratorLink').href = `https://www.toyota.com/configurator/${v.id.replace('gr', 'gr-').replace('morizo', '')}`;

            // Render badges
            let badgesHtml = '';
            v.badges.forEach(b => {
                const isHybrid = b.toLowerCase().includes('hybrid') || b.toLowerCase().includes('electric');
                badgesHtml += `<span class="modal-badge ${isHybrid ? 'hybrid' : 'featured'}">${b}</span>`;
            });
            if (v.hybrid && !v.badges.some(b => b.toLowerCase().includes('hybrid'))) {
                badgesHtml += `<span class="modal-badge hybrid">Hybrid Available</span>`;
            }
            document.getElementById('modalBadges').innerHTML = badgesHtml;

            // Render color gallery
            renderColorGallery(vehicleId);

            // Render specs
            renderSpecs(v);

            // Show modal
            document.getElementById('vehicleModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function renderColorGallery(vehicleId) {
            const colors = getVehicleColors(vehicleId);
            const swatchesEl = document.getElementById('colorSwatches');
            const countEl = document.getElementById('colorCount');

            countEl.textContent = `${colors.length} colors available`;

            swatchesEl.innerHTML = colors.map((colorKey, index) => {
                const color = getColorData(colorKey);
                return `<div class="color-swatch ${index === 0 ? 'active' : ''}" 
                            style="background: ${color.hex};" 
                            title="${color.name}"
                            onclick="selectColor(${index})"></div>`;
            }).join('');

            // Set initial color
            selectColor(0);
        }

        function selectColor(index) {
            currentColorIndex = index;
            const v = currentVehicle;
            const colors = getVehicleColors(v.id);
            const colorKey = colors[index];
            const color = getColorData(colorKey);

            // Update swatch active states
            document.querySelectorAll('#colorSwatches .color-swatch').forEach((swatch, idx) => {
                swatch.classList.toggle('active', idx === index);
            });

            // Update color name display
            document.getElementById('colorNameSwatch').style.background = color.hex;
            document.getElementById('colorNameText').textContent = color.name;

            // Update main image using Toyota's CDN with color code
            const mainImageEl = document.getElementById('modalMainImage');
            const colorCode = color.code || '040'; // Default to Ice Cap (white) if no code
            const imgUrl = getColorImageUrl(v.id, colorCode, v.year);
            
            mainImageEl.innerHTML = `
                <img src="${imgUrl}" 
                     alt="${v.name} in ${color.name}"
                     onerror="this.onerror=null; this.src='${getVehicleImageUrl(v.id, v.year)}'; this.style.opacity='0.8';">
                <i class="fas fa-car placeholder-icon" style="display: none;"></i>
            `;
        }

        function renderSpecs(v) {
            let bodyHtml = '';

            // Dimensions
            bodyHtml += `
                <div class="specs-section">
                    <h3 class="specs-title"><i class="fas fa-ruler-combined"></i> Dimensions</h3>
                    <div class="specs-grid">
                        ${Object.entries(v.specs.dimensions).map(([key, val]) => `
                            <div class="spec-item">
                                <div class="spec-label">${formatLabel(key)}</div>
                                <div class="spec-value">${val}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            // Interior
            bodyHtml += `
                <div class="specs-section">
                    <h3 class="specs-title"><i class="fas fa-couch"></i> Interior Space</h3>
                    <div class="specs-grid">
                        ${Object.entries(v.specs.interior).map(([key, val]) => `
                            <div class="spec-item">
                                <div class="spec-label">${formatLabel(key)}</div>
                                <div class="spec-value">${val}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            // Performance
            bodyHtml += `
                <div class="specs-section">
                    <h3 class="specs-title"><i class="fas fa-tachometer-alt"></i> Performance</h3>
                    <div class="specs-grid">
                        ${Object.entries(v.specs.performance).map(([key, val]) => `
                            <div class="spec-item">
                                <div class="spec-label">${formatLabel(key)}</div>
                                <div class="spec-value ${key.includes('mpg') ? 'highlight' : ''}">${val}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            // Hybrid specs if available
            if (v.specs.hybridSpecs) {
                bodyHtml += `
                    <div class="specs-section">
                        <h3 class="specs-title"><i class="fas fa-leaf"></i> Hybrid Option</h3>
                        <div class="specs-grid">
                            ${Object.entries(v.specs.hybridSpecs).map(([key, val]) => `
                                <div class="spec-item">
                                    <div class="spec-label">${formatLabel(key)}</div>
                                    <div class="spec-value ${key.includes('mpg') ? 'highlight' : ''}">${val}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            // Hybrid MAX specs if available
            if (v.specs.hybridMaxSpecs) {
                bodyHtml += `
                    <div class="specs-section">
                        <h3 class="specs-title"><i class="fas fa-bolt"></i> Hybrid MAX Option</h3>
                        <div class="specs-grid">
                            ${Object.entries(v.specs.hybridMaxSpecs).map(([key, val]) => `
                                <div class="spec-item">
                                    <div class="spec-label">${formatLabel(key)}</div>
                                    <div class="spec-value highlight">${val}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            // Prime specs if available
            if (v.specs.primeSpecs) {
                bodyHtml += `
                    <div class="specs-section">
                        <h3 class="specs-title"><i class="fas fa-plug"></i> Plug-in Hybrid (Prime)</h3>
                        <div class="specs-grid">
                            ${Object.entries(v.specs.primeSpecs).map(([key, val]) => `
                                <div class="spec-item">
                                    <div class="spec-label">${formatLabel(key)}</div>
                                    <div class="spec-value highlight">${val}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            // Trims
            bodyHtml += `
                <div class="specs-section">
                    <h3 class="specs-title"><i class="fas fa-layer-group"></i> Trim Levels</h3>
                    <div class="trims-grid">
                        ${v.trims.map(t => `
                            <div class="trim-item">
                                <span class="trim-name">${t.name}</span>
                                <span class="trim-price">${t.price}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            // Features
            if (v.features && v.features.length) {
                bodyHtml += `
                    <div class="specs-section">
                        <h3 class="specs-title"><i class="fas fa-star"></i> Key Features</h3>
                        <div class="specs-grid">
                            ${v.features.map(f => `
                                <div class="spec-item">
                                    <div class="spec-value" style="font-size: 14px;"><i class="fas fa-check" style="color: var(--success); margin-right: 8px;"></i>${f}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            document.getElementById('modalBody').innerHTML = bodyHtml;
        }

        function closeModal() {
            document.getElementById('vehicleModal').classList.remove('active');
            document.body.style.overflow = '';
            currentVehicle = null;
        }

        function printBrochure() {
            window.print();
        }

        function copySpecs() {
            if (!currentVehicle) return;
            const v = currentVehicle;
            const colors = getVehicleColors(v.id);
            const colorNames = colors.map(c => getColorData(c).name).join(', ');
            
            let text = `${v.year} Toyota ${v.name}\n${'='.repeat(40)}\n`;
            text += `${v.tagline}\n`;
            text += `Starting MSRP: ${v.msrpRange}\n\n`;

            // Colors
            text += `AVAILABLE COLORS\n${'-'.repeat(30)}\n`;
            text += `${colorNames}\n\n`;

            // Dimensions
            text += `DIMENSIONS\n${'-'.repeat(30)}\n`;
            Object.entries(v.specs.dimensions).forEach(([key, val]) => {
                text += `${formatLabel(key)}: ${val}\n`;
            });
            text += '\n';

            // Interior
            text += `INTERIOR SPACE\n${'-'.repeat(30)}\n`;
            Object.entries(v.specs.interior).forEach(([key, val]) => {
                text += `${formatLabel(key)}: ${val}\n`;
            });
            text += '\n';

            // Performance
            text += `PERFORMANCE\n${'-'.repeat(30)}\n`;
            Object.entries(v.specs.performance).forEach(([key, val]) => {
                text += `${formatLabel(key)}: ${val}\n`;
            });
            text += '\n';

            // Trims
            text += `TRIM LEVELS\n${'-'.repeat(30)}\n`;
            v.trims.forEach(t => {
                text += `${t.name}: ${t.price}\n`;
            });
            text += '\n';

            text += `${'='.repeat(40)}\n`;
            text += `Jeff Lee | Sales Consultant | Pedersen Toyota\n`;
            text += `720-416-6955 | jlee@pedersentoyota.com\n`;

            navigator.clipboard.writeText(text).then(() => {
                showToast('Specs copied to clipboard!');
            });
        }

        function openEmailModal() {
            if (!currentVehicle) return;
            
            const v = currentVehicle;
            const colors = getVehicleColors(v.id);
            const selectedColor = getColorData(colors[currentColorIndex]);

            const defaultMessage = `Hi,

Thank you for your interest in the ${v.year} Toyota ${v.name}!

I've attached the complete spec sheet for this vehicle. Here are some highlights:

 Starting MSRP: ${v.msrpRange}
 Color shown: ${selectedColor.name}
 ${v.specs.performance.mpgCombined ? `Fuel Economy: ${v.specs.performance.mpgCombined} MPG combined` : v.specs.performance.range ? `Range: ${v.specs.performance.range}` : ''}
 ${v.features ? v.features.slice(0, 3).join('\n ') : ''}

Available colors include: ${colors.slice(0, 5).map(c => getColorData(c).name).join(', ')}${colors.length > 5 ? ` and ${colors.length - 5} more` : ''}.

I'd love to schedule a test drive so you can experience it yourself. What day works best for you?

Best regards,
Jeff Lee
Sales Consultant | Pedersen Toyota
720-416-6955 | jlee@pedersentoyota.com`;

            document.getElementById('emailMessage').value = defaultMessage;
            document.getElementById('emailModal').classList.add('active');
        }

        function closeEmailModal() {
            document.getElementById('emailModal').classList.remove('active');
            document.getElementById('customerName').value = '';
            document.getElementById('customerEmail').value = '';
        }

        function sendEmail() {
            const name = document.getElementById('customerName').value;
            const email = document.getElementById('customerEmail').value;
            const message = document.getElementById('emailMessage').value;

            if (!email) {
                alert('Please enter customer email');
                return;
            }

            const v = currentVehicle;
            const subject = encodeURIComponent(`${v.year} Toyota ${v.name} - Spec Sheet from Jeff Lee`);
            const body = encodeURIComponent(message);

            // Open default email client
            window.location.href = `mailto:${email}?subject=${subject}&body=${body}`;

            closeEmailModal();
            showToast('Email client opened!');
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            toastMessage.textContent = message;
            toast.classList.add('active');
            
            setTimeout(() => {
                toast.classList.remove('active');
            }, 3000);
        }

        // ===========================================
        // EVENT LISTENERS
        // ===========================================
        
        document.querySelectorAll('.category-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.category-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                currentCategory = tab.dataset.category;
                renderGrid();
            });
        });

        document.getElementById('vehicleSearch').addEventListener('input', (e) => {
            searchQuery = e.target.value;
            renderGrid();
        });

        document.getElementById('vehicleModal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('vehicleModal')) {
                closeModal();
            }
        });

        document.getElementById('emailModal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('emailModal')) {
                closeEmailModal();
            }
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
                closeEmailModal();
            }
        });

        // Initial render
        renderGrid();
    </script>
</body>
</html>
